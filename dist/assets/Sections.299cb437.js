import{_ as W,e as Y,a as Z,b as T,c as C,f as S,M as V,g as L,h as ee,i as le,j as ae,k as A,l as te,m as se,n as ne,o as oe,p as ue,q as ie}from"./Navbar.vue_vue_type_script_setup_true_lang.262f34dc.js";import{d as de,u as ce,r as o,i as re,o as me,R as ve,c as B,a as l,w as s,b as e,F,e as g,g as b,j,I as _e,E as I,f as u,l as pe,Q as G,S as fe}from"./index.13e0a12b.js";import{a as $}from"./axios.f2a602b3.js";const ye=u("div",{class:"p-3"},"Nothing to display. Add a few sections.",-1),ge={class:"my-4"},be={class:"my-4"},xe={class:"my-4"},Se={class:"my-4"},Ve={class:"my-4"},$e={class:"my-4"},he={class:"my-4"},Ne=de({__name:"Sections",setup(ke){const Q=ce(),q=n=>{Q.current_section_id=n,fe.push("section")},h=o([]),p=o(!1),i=o(""),d=o(""),c=o(""),r=o(""),m=o(""),v=o(""),_=o(""),f=o({edited:!1,value:-1}),y=o(""),E=re(()=>!(i.value.trim()===""||d.value.trim()===""||c.value.trim()===""||r.value.trim()===""||m.value.trim()===""||v.value.trim()===""||_.value.trim()==="")),R=()=>{i.value="",d.value="",c.value="",r.value="",m.value="",v.value="",_.value="",f.value={edited:!1,value:-1}},O=async()=>{!E.value||(f.value.edited?J(f.value.value,i.value,d.value,c.value,r.value,m.value,v.value,_.value):z(i.value,d.value,c.value,r.value,m.value,v.value,_.value),R(),p.value=!1)},P=n=>{i.value=n.chapterNumber,d.value=n.sectionNumber,c.value=n.sectionTitle,r.value=n.sectionImage,m.value=n.sectionImageDescription,v.value=n.sectionText,_.value=n.sectionSummary,f.value={edited:!0,value:n._id},p.value=!0},k=()=>{$.get(`${y.value}sections`).then(n=>h.value=n.data)},N=o(""),X=()=>{const n=N.value;$.get(`${y.value}sections`,{params:{search:n}}).then(t=>h.value=t.data)},z=(n,t,x,a,w,U,D)=>{const M={chapterNumber:n,sectionNumber:t,sectionTitle:x,sectionImage:a,sectionImageDescription:w,sectionText:U,sectionSummary:D};$.post(`${y.value}sections`,M).then(()=>{k()})},H=n=>{$.delete(`${y.value}sections/${n}`).then(()=>{k()})},J=(n,t,x,a,w,U,D,M)=>{const K={chapterNumber:t,sectionNumber:x,sectionTitle:a,sectionImage:w,sectionImageDescription:U,sectionText:D,sectionSummary:M};$.put(`${y.value}sections/${n}`,K).then(()=>{k()})};return me(()=>{y.value="https://textbookai-backend.mdbgo.io:3000/",k()}),(n,t)=>{const x=ve("mdb-ripple");return g(),B(F,null,[l(e(W),{class:"mt-5"},{default:s(()=>[l(Z),l(e(T),{class:"g-2 g-lg-3 pt-5 pb-4"},{default:s(()=>[l(e(C),{class:"text-start"},{default:s(()=>[l(e(S),{color:"secondary",onClick:t[0]||(t[0]=a=>p.value=!0)},{default:s(()=>[b("Add Section")]),_:1})]),_:1}),l(e(C),{md:"4"},{default:s(()=>[l(e(V),{inputGroup:"",formOutline:!1,wrapperClass:"mb-3",modelValue:N.value,"onUpdate:modelValue":t[1]||(t[1]=a=>N.value=a),placeholder:"Search sections, e.g. 'chapter 1', 'world war II', ...","aria-label":"Search"},{default:s(()=>[l(e(S),{color:"primary",onClick:X},{default:s(()=>[l(e(L),{icon:"search"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),h.value.length===0?(g(),j(e(T),{key:0,class:"gy-5"},{default:s(()=>[l(e(C),{col:"6",class:"p-3"},{default:s(()=>[ye]),_:1})]),_:1})):(g(),j(e(T),{key:1,class:"gy-5"},{default:s(()=>[(g(!0),B(F,null,_e(h.value,a=>(g(),j(e(C),{md:"4",class:"d-flex justify-content-center align-items-center"},{default:s(()=>[l(e(se),null,{default:s(()=>[pe((g(),B("a",null,[l(e(ne),{style:{width:"100%",height:"15rem","object-fit":"cover"},src:a.sectionImage,top:"",alt:a.sectionImageDescription},null,8,["src","alt"])])),[[x,{color:"light"}]]),l(e(oe),null,{default:s(()=>[l(e(ue),null,{default:s(()=>[b(" Chapter "+I(a.chapterNumber)+"."+I(a.sectionNumber)+" ",1),l(e(G),{text:a.sectionTitle,"max-lines":2},null,8,["text"])]),_:2},1024),l(e(ie),null,{default:s(()=>[l(e(G),{text:a.sectionSummary,"max-lines":3},null,8,["text"])]),_:2},1024),l(e(S),{color:"secondary",onClick:w=>q(a._id),class:"me-3"},{default:s(()=>[b(" Go to Section ")]),_:2},1032,["onClick"]),l(e(L),{class:"text-primary me-3",title:"edit",icon:"pen",style:{cursor:"pointer"},onClick:()=>P(a)},null,8,["onClick"]),l(e(L),{class:"text-danger",title:"delete",icon:"trash",style:{cursor:"pointer"},onClick:()=>H(a._id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}))]),_:1}),l(e(Y),{id:"addNewSectionModal",tabindex:"-1",labelledby:"addNewSectionModalLabel",modelValue:p.value,"onUpdate:modelValue":t[10]||(t[10]=a=>p.value=a)},{default:s(()=>[l(e(ee),null,{default:s(()=>[l(e(le),{id:"exampleModalLabel"},{default:s(()=>[b(I(f.value.edited?"Edit section":"Add section"),1)]),_:1})]),_:1}),l(e(ae),null,{default:s(()=>[u("form",null,[u("div",ge,[l(e(V),{label:"chapter_number",type:"text",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=a=>i.value=a),counter:"",maxlength:2},null,8,["modelValue"])]),u("div",be,[l(e(V),{label:"section_number",type:"text",modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=a=>d.value=a),counter:"",maxlength:2},null,8,["modelValue"])]),u("div",xe,[l(e(V),{label:"section_title",type:"text",modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=a=>c.value=a),counter:"",maxlength:255},null,8,["modelValue"])]),u("div",Se,[l(e(V),{label:"section_image",type:"text",modelValue:r.value,"onUpdate:modelValue":t[5]||(t[5]=a=>r.value=a),counter:"",maxlength:255},null,8,["modelValue"])]),u("div",Ve,[l(e(A),{label:"section_image_description",type:"text",modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=a=>m.value=a)},null,8,["modelValue"])]),u("div",$e,[l(e(A),{label:"section_text",type:"text",modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=a=>v.value=a)},null,8,["modelValue"])]),u("div",he,[l(e(A),{label:"section_summary",type:"text",modelValue:_.value,"onUpdate:modelValue":t[8]||(t[8]=a=>_.value=a)},null,8,["modelValue"])])])]),_:1}),l(e(te),null,{default:s(()=>[l(e(S),{color:"secondary",onClick:t[9]||(t[9]=a=>{R(),p.value=!1})},{default:s(()=>[b("Close")]),_:1}),l(e(S),{color:"primary",onClick:O,disabled:!E.value},{default:s(()=>[b(I(f.value.edited?"Save changes":"Add Section"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Ne as default};
