import{_ as G,h as R,a as X,b as A,c as N,i as T,M,g as _,d as q,j as z,k as H,l as J,m as K,t as Q,n as W,f as Y}from"./Navbar.vue_vue_type_script_setup_true_lang.ee11c150.js";import{a as h}from"./axios.f2a602b3.js";import{d as Z,u as ee,r as o,i as ae,o as le,c as y,a as t,w as s,b as a,F as B,e as u,g as b,j as x,I as te,E as k,f as p}from"./index.d010bbe1.js";const se={key:0},ne={key:0,class:"bg-warning"},oe={key:1},ue=p("br",null,null,-1),de={class:"my-4"},ie={class:"my-4"},re={class:"my-4"},ce={class:"my-4"},_e=Z({__name:"Terms",setup(me){ee();const S=o("collapseOne"),V=o([]),c=o(!1),d=o(""),i=o(""),r=o(""),f=o(!1),m=o({edited:!1,value:-1}),v=o(""),U=ae(()=>!(d.value.trim()===""||i.value.trim()===""||r.value.trim()==="")),I=()=>{d.value="",i.value="",r.value="",m.value={edited:!1,value:-1}},P=async()=>{!U.value||(m.value.edited?w(m.value.value,d.value,i.value,r.value,f.value):F(d.value,i.value,r.value,f.value),I(),c.value=!1)},D=n=>{d.value=n.chapterNumber,i.value=n.title,r.value=n.description,f.value=n.pinTerm,m.value={edited:!0,value:n._id},c.value=!0},$=()=>{h.get(`${v.value}terms`).then(n=>V.value=n.data)},C=o(""),E=()=>{const n=C.value;h.get(`${v.value}terms`,{params:{search:n}}).then(l=>V.value=l.data)},F=(n,l,e,L)=>{const g={chapterNumber:n,title:l,description:e};h.post(`${v.value}terms`,g).then(()=>{$()})},j=n=>{h.delete(`${v.value}terms/${n}`).then(()=>{$()})},w=(n,l,e,L,g)=>{const O={chapterNumber:l,title:e,description:L,pinTerm:g};console.log(g),h.put(`${v.value}terms/${n}`,O).then(()=>{$()})};return le(()=>{v.value="https://textbookai-backend-2ffe066fb0f8.herokuapp.com/",$()}),(n,l)=>(u(),y(B,null,[t(a(G),{class:"mt-5"},{default:s(()=>[t(X),t(a(A),{class:"pt-5 pb-4"},{default:s(()=>[t(a(N),{class:"text-start"},{default:s(()=>[t(a(T),{color:"secondary",onClick:l[0]||(l[0]=e=>c.value=!0)},{default:s(()=>[b("Add Term")]),_:1})]),_:1}),t(a(N),{md:"4"},{default:s(()=>[t(a(M),{inputGroup:"",formOutline:!1,wrapperClass:"mb-3",modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e),placeholder:"Search terms, e.g. 'chapter 1', 'Calvinism', ...","aria-label":"Search"},{default:s(()=>[t(a(T),{color:"primary",onClick:E},{default:s(()=>[t(a(_),{icon:"search"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(a(A),{class:"pt-5"},{default:s(()=>[t(a(N),{class:"text-center"},{default:s(()=>[V.value.length===0?(u(),y("div",se," Nothing to display. Add a few terms. ")):(u(),x(a(q),{key:1,modelValue:S.value,"onUpdate:modelValue":l[2]||(l[2]=e=>S.value=e)},{default:s(()=>[(u(!0),y(B,null,te(V.value,e=>(u(),x(a(Y),{icon:"fas fa-highlighter fa-sm me-2 opacity-70",headerTitle:e.title,collapseId:e.title},{default:s(()=>[e.pinTerm?(u(),y("div",ne,k(e.description),1)):(u(),y("div",oe,k(e.description),1)),b(" - From Chapter "+k(e.chapterNumber)+" ",1),ue,e.pinTerm?(u(),x(a(_),{key:3,class:"text-danger ms-3 me-3",title:"Pin",icon:"eye-slash",style:{cursor:"pointer"},onClick:()=>w(e._id,e.chapterNumber,e.title,e.description,!1)},null,8,["onClick"])):(u(),x(a(_),{key:2,class:"text-danger ms-3 me-3",title:"Pin",icon:"eye",style:{cursor:"pointer"},onClick:()=>w(e._id,e.chapterNumber,e.title,e.description,!0)},null,8,["onClick"])),t(a(_),{class:"text-primary me-3",title:"edit",icon:"pen",style:{cursor:"pointer"},onClick:()=>D(e)},null,8,["onClick"]),t(a(_),{class:"text-danger",title:"delete",icon:"trash",style:{cursor:"pointer"},onClick:()=>j(e._id)},null,8,["onClick"])]),_:2},1032,["headerTitle","collapseId"]))),256))]),_:1},8,["modelValue"]))]),_:1})]),_:1})]),_:1}),t(a(R),{id:"addNewTermrModal",tabindex:"-1",labelledby:"addNewTermModalLabel",modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e)},{default:s(()=>[t(a(z),null,{default:s(()=>[t(a(H),{id:"exampleModalLabel"},{default:s(()=>[b(k(m.value.edited?"Edit term":"Add term"),1)]),_:1})]),_:1}),t(a(J),null,{default:s(()=>[p("form",null,[p("div",de,[t(a(M),{label:"chapter_number",type:"text",modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),counter:"",maxlength:2},null,8,["modelValue"])]),p("div",ie,[t(a(M),{label:"title",type:"text",modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),counter:"",maxlength:255},null,8,["modelValue"])]),p("div",re,[t(a(K),{label:"description",type:"text",modelValue:r.value,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value=e)},null,8,["modelValue"])]),p("div",ce,[t(a(Q),{label:"Pin Term for later review?",modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=e=>f.value=e)},null,8,["modelValue"])])])]),_:1}),t(a(W),null,{default:s(()=>[t(a(T),{color:"secondary",onClick:l[7]||(l[7]=e=>{I(),c.value=!1})},{default:s(()=>[b("Close")]),_:1}),t(a(T),{color:"primary",onClick:P,disabled:!U.value},{default:s(()=>[b(k(m.value.edited?"Save changes":"Add Term"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["modelValue"])],64))}});export{_e as default};
